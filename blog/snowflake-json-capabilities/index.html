<!doctype html><html><head><title>Snowflake JSON Capabilities | /vishnuvp</title><meta charset=utf-8><meta name=language content="en"><meta name=description content><meta name=keywords content="snowflake ,JSON"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=twitter:card content="summary"><meta name=twitter:title content="Snowflake JSON Capabilities"><meta name=twitter:description content><meta name=twitter:site content="@https://twitter.com/vishnuvp"><meta name=twitter:creator content="@https://twitter.com/vishnuvp"><link rel="shortcut icon" type=image/png href=/favicon.ico><link rel=stylesheet href=/css/post.min.f2df1c9158216eb0f6fdfeacee4a0ee821dee43ee7e09951e8f503899b51e02d.css integrity="sha256-8t8ckVghbrD2/f6s7koO6CHe5D7n4JlR6PUDiZtR4C0="><link rel=stylesheet href=/css/custom.min.60deead5f67cbad66103c82dac86ac2168012087d1c5a12ea299bc027b26d1da.css integrity="sha256-YN7q1fZ8utZhA8gtrIasIWgBIIfRxaEuopm8Ansm0do="><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"\/"},"articleSection":"blog","name":"Snowflake JSON Capabilities","headline":"Snowflake JSON Capabilities","description":"","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2020","datePublished":"2020-07-06 22:23:25 \u002b0530 IST","dateModified":"2020-07-06 22:23:25 \u002b0530 IST","url":"\/blog\/snowflake-json-capabilities\/","wordCount":"395","keywords":["snowflake","JSON","Blog"]}</script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-41294744-2','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-41294744-2','auto');ga('send','pageview');}</script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav role=navigation><ul class=nav__list><li><a class=active href=/blog/>blog</a></li><li><a href=/>home</a></li></ul></nav><main><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title>Snowflake JSON Capabilities</h1><time datetime="2020-07-06 22:23:25 +0530 IST" class=post__date>Jul 6 2020</time></header><article class=post__content><p>Snowflake is a relational DBMS. However, it supports querying and manipulating JSON data by providing a special data type called <code>Variant</code>.
So, if we store the JSON documents in a single column table, Snowflake will effectively be querying JSON object.</p><p>For example, consider this table defenition:</p><pre><code>CREATE TABLE JSON_DATA (DATA VARIANT);
</code></pre><p>If the JSON documents are in an S3 bucket, we can import the data using a copy into command.</p><pre><code>copy into JSON_DATA
  from external_s3_bucket
  file_format = (type = JSON_DATA);
</code></pre><p>The <code>external_s3_bucket</code> in this command is an external stage which we need to configure using the <code>CREATE EXTERNAL STAGE</code> command where we will specify the bucket access credentials.</p><p>This command will load the JSON documents into the JSON_DATA table in the variant column, DATA.</p><p>To better explain the data handling, consider this example JSON document which is imported into the aforesaid table.</p><pre><code>{
  &quot;version&quot; : &quot;1.5.1&quot;,
  &quot;seed&quot; : &quot;2aed4300a33d6c86fd85f2c75fedfdba&quot;,
  &quot;options&quot; : {
    &quot;http&quot; : {
      &quot;user_agent&quot; : &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36&quot;,
      &quot;request_timeout&quot; : 10000,
      &quot;request_redirect_limit&quot; : 5,
      &quot;request_concurrency&quot; : 20,
      &quot;request_queue_size&quot; : 100,
      &quot;request_headers&quot; : {},
      &quot;response_max_size&quot; : 500000,
      &quot;cookies&quot; : {},
      &quot;authentication_type&quot; : &quot;auto&quot;
    }
   }
}
</code></pre><p>To query this JSON data, we can use the select query.
For example:</p><pre><code>SELECT * FROM JSON_DATA;

RESULT
------
--------------------------------------------------------------------------------------------------------------------------------------------
|DATA 																																		|
--------------------------------------------------------------------------------------------------------------------------------------------
| {																																			|
|   &quot;version&quot; : &quot;1.5.1&quot;,																													|
|   &quot;seed&quot; : &quot;2aed4300a33d6c86fd85f2c75fedfdba&quot;,																							|
|   &quot;options&quot; : {																															|
|     &quot;http&quot; : {																															|
|       &quot;user_agent&quot; : &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36&quot;,	|
|       &quot;request_timeout&quot; : 10000,																											|
|       &quot;request_redirect_limit&quot; : 5,																										|
|       &quot;request_concurrency&quot; : 20,																											|
|       &quot;request_queue_size&quot; : 100,																											|
|       &quot;request_headers&quot; : {},																												|
|       &quot;response_max_size&quot; : 500000,																										|
|       &quot;cookies&quot; : {},																														|
|       &quot;authentication_type&quot; : &quot;auto&quot;																										|
|     }																																		|
|    }																																		|
|  }																																		|
--------------------------------------------------------------------------------------------------------------------------------------------
</code></pre><pre><code>SELECT DATA:&quot;version&quot;, DATA:&quot;seed&quot;, DATA:&quot;options&quot;:&quot;http&quot;:&quot;authentication_type&quot; FROM JSON_DATA;

RESULT
------

----------------------------------------------------------------------------------------------------
|DATA:&quot;version&quot; | DATA:&quot;seed&quot;                         | DATA:&quot;options&quot;:&quot;http&quot;:&quot;authentication_type&quot; |
----------------------------------------------------------------------------------------------------
|  &quot;1.5.1&quot;		| &quot;2aed4300a33d6c86fd85f2c75fedfdba&quot;  | &quot;auto&quot;										|
----------------------------------------------------------------------------------------------------

</code></pre><hr><p>There are a few useful built-in functions provided by Snowflake. A few of them are:</p><ul><li>flatten( input => json_tree ) - We can flatten a nested JSON sub tree, so that querying becomes easier</li><li>PARSE_JSON - To convert a JSON string to JSON object</li><li>GET_PATH - path to a particular key</li><li>OBJECT_KEYS - extract keys from the document</li></ul><h2 id=resources>RESOURCES<a class=anchor href=#resources>#</a></h2><p>An article in Snowflake documentation:
<a href=https://community.snowflake.com/s/article/json-data-parsing-in-snowflake>https://community.snowflake.com/s/article/json-data-parsing-in-snowflake</a></p></article><ul class=tags__list><li class=tag__item><a class=tag__link href=/tags/snowflake/>snowflake</a></li><li class=tag__item><a class=tag__link href=/tags/json/>json</a></li><li class=tag__item><a class=tag__link href=/tags/article/>article</a></li></ul><div class=pagination><a class=pagination__item href=/blog/automatic-data-ingestion-in-snowflake-using-snowpipe/><span class=pagination__label>Previous Post</span>
<span class=pagination__title>Automatic Data Ingestion in Snowflake Using Snowpipe</span></a>
<a class=pagination__item href=/blog/access-host-from-docker-container-in-macos/><span class=pagination__label>Next Post</span>
<span class=pagination__title>Access Host From Docker Container in Macos</a></a></div><script src=https://utteranc.es/client.js repo=vishnuvp/blog issue-term=title label=Comment theme=github-light crossorigin=anonymous async></script><footer class=post__footer><div class=social-icons><a class=social-icons__icon title=Twitter style=background-image:url(/images/social/twitter.svg) href=https://twitter.com/vishnuvp target=_blank rel=noopener></a><a class=social-icons__icon title=GitHub style=background-image:url(/images/social/github.svg) href=https://github.com/vishnuvp target=_blank rel=noopener></a><a class=social-icons__icon title=Email style=background-image:url(/images/social/email.svg) href=mailto:devinbox.vishnu@gmail.com target=_blank rel=noopener></a><a class=social-icons__icon title=Instagram style=background-image:url(/images/social/instagram.svg) href=https://instagram.com/vishnuvenukumar target=_blank rel=noopener></a><a class=social-icons__icon title=LinkedIn style=background-image:url(/images/social/linkedin.svg) href=https://www.linkedin.com/in/vishnuvenukumar target=_blank rel=noopener></a></div><p>Â© vishnuvp 2020</p></footer></div></div></div></main><script src=/js/index.min.49e4d8a384357d9b445b87371863419937ede9fa77737522ffb633073aebfa44.js integrity="sha256-SeTYo4Q1fZtEW4c3GGNBmTft6fp3c3Ui/7YzBzrr+kQ=" crossorigin=anonymous></script><script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script><script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script></body></html>